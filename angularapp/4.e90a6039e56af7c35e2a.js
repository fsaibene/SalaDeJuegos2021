(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{"3aSD":function(t,e,i){"use strict";i.r(e),i.d(e,"GamesModule",function(){return vt});var s=i("fXoL"),n=i("2Vo4"),r=i("IwV7"),a=i("gLg0"),c=i("qXBG"),o=i("bTqV"),l=i("ofXK");let h=(()=>{class t{constructor(){this.value="",this.gameEnded=new n.a(!1)}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=s.Ib({type:t,selectors:[["app-square"]],inputs:{value:"value",gameEnded:"gameEnded"},decls:3,vars:4,consts:[["status","success",3,"disabled"]],template:function(t,e){1&t&&(s.Ub(0,"button",0),s.hc(1,"async"),s.Cc(2),s.Tb()),2&t&&(s.lc("disabled",s.ic(1,2,e.gameEnded)),s.Db(2),s.Dc(e.value))},pipes:[l.b],styles:["button[_ngcontent-%COMP%]{width:150px;height:150px;font-size:5em!important}"]}),t})();function d(t,e){if(1&t&&(s.Ub(0,"h2"),s.Cc(1),s.Tb()),2&t){const t=s.gc();s.Db(1),s.Ec(" El jugador ",t.winner," gan\xf3! ")}}function p(t,e){1&t&&(s.Ub(0,"h2"),s.Cc(1," Empate! "),s.Tb())}function u(t,e){if(1&t){const t=s.Vb();s.Ub(0,"app-square",4),s.cc("click",function(){s.uc(t);const i=e.index;return s.gc().makeMove(i)}),s.Tb()}if(2&t){const t=e.$implicit,i=s.gc();s.lc("value",t)("gameEnded",i.gameEnded)}}let g=(()=>{class t{constructor(t,e){this.scoreService=t,this.authService=e,this.squares=new Array,this.xIsNext=!1,this.winner="",this.gameEnded=new n.a(!1)}ngOnInit(){this.newGame()}newGame(){this.squares=Array(9).fill(null),this.winner="",this.xIsNext=!0,this.gameEnded.next(!1)}get player(){return this.xIsNext?"X":"O"}makeMove(t){if(this.squares[t]||(this.squares[t]=this.player,this.xIsNext=!this.xIsNext),!this.xIsNext){let t=this.getRandomMoveIndex();-1!=t?this.makeMove(t):this.winner=this.calculateWinner()}this.winner=this.calculateWinner(),this.winner&&(-1==t||this.gameEnded.value||this.saveScore(),this.gameEnded.next(!0))}saveScore(){let t=new r.b;t.game="tateti",t.date=Date.now().toString(),t.user=this.authService.loggedUser.value;let e=this.getResult();t.score={result:e},this.scoreService.create(t)}getResult(){return"draw"==this.winner?"draw":"X"==this.winner?"won":"lost"}getRandomMoveIndex(){let t=new Array,e=0;return this.squares.forEach(i=>{i||t.push(e),e++}),t.length>0?t[Math.floor(Math.random()*t.length)]:9==e?-1:0}calculateWinner(){const t=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];for(let e=0;e<t.length;e++){const[i,s,n]=t[e];if(this.squares[i]&&this.squares[i]===this.squares[s]&&this.squares[i]===this.squares[n])return this.squares[i]}return 0==this.squares.filter(t=>"O"!=t&&"X"!=t).length?"draw":""}}return t.\u0275fac=function(e){return new(e||t)(s.Ob(a.a),s.Ob(c.a))},t.\u0275cmp=s.Ib({type:t,selectors:[["app-board"]],decls:9,vars:4,consts:[[1,"container"],["mat-button","","color","mat-primary",3,"click"],[4,"ngIf"],[3,"value","gameEnded","click",4,"ngFor","ngForOf"],[3,"value","gameEnded","click"]],template:function(t,e){1&t&&(s.Ub(0,"h1"),s.Cc(1),s.Tb(),s.Ub(2,"div",0),s.Ub(3,"button",1),s.cc("click",function(){return e.newGame()}),s.Cc(4,"Nuevo Juego"),s.Tb(),s.Ac(5,d,2,1,"h2",2),s.Ac(6,p,2,0,"h2",2),s.Ub(7,"main"),s.Ac(8,u,1,2,"app-square",3),s.Tb(),s.Tb()),2&t&&(s.Db(1),s.Ec("Simbolo Jugador: ",e.player," "),s.Db(4),s.lc("ngIf",e.winner&&"draw"!=e.winner),s.Db(1),s.lc("ngIf","draw"==e.winner),s.Db(2),s.lc("ngForOf",e.squares))},directives:[o.b,l.k,l.j,h],styles:["main[_ngcontent-%COMP%]{display:grid;grid-template-columns:152px 152px 150px;grid-gap:0}app-square[_ngcontent-%COMP%]{border:1px solid grey;height:150px;width:150px}.container[_ngcontent-%COMP%]{display:inline-grid;max-height:400px}"]}),t})();var b=i("tyNb"),f=i("znSr");const m=function(t){return{"fix-top":t}};let v=(()=>{class t{constructor(t){this.router=t,this.fixTop=!1}ngOnInit(){}goToSurvey(){this.router.navigate(["/survey"],{queryParams:{game:this.selectedGame}})}}return t.\u0275fac=function(e){return new(e||t)(s.Ob(b.b))},t.\u0275cmp=s.Ib({type:t,selectors:[["app-survey-button"]],inputs:{selectedGame:"selectedGame",fixTop:"fixTop"},decls:3,vars:3,consts:[[1,"nav-tool-items","survey-btn",3,"ngClass"],["mat-button","","mat-raised-button","","routerLinkActive","active",3,"click"]],template:function(t,e){1&t&&(s.Ub(0,"div",0),s.Ub(1,"a",1),s.cc("click",function(){return e.goToSurvey()}),s.Cc(2,"Ir a la encuesta!"),s.Tb(),s.Tb()),2&t&&s.lc("ngClass",s.pc(1,m,e.fixTop))},directives:[l.i,f.a,o.a,b.c],styles:[".survey-btn[_ngcontent-%COMP%]{display:table;margin:0 auto}.fix-top[_ngcontent-%COMP%]{margin-top:104px}"]}),t})(),C=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=s.Ib({type:t,selectors:[["app-tateti"]],decls:3,vars:2,consts:[[1,"container"],[3,"fixTop","selectedGame"]],template:function(t,e){1&t&&(s.Ub(0,"div",0),s.Pb(1,"app-board"),s.Pb(2,"app-survey-button",1),s.Tb()),2&t&&(s.Db(2),s.lc("fixTop",!0)("selectedGame","tateti"))},directives:[g,v],styles:[".container[_ngcontent-%COMP%]{text-align:center}"]}),t})();var y=i("MKys"),S=i("Wp6s");const x=function(t){return{color:t}};let w=(()=>{class t{constructor(t,e){this.authService=t,this.scoreService=e,this.response="",this.oponentSelection="",this.userSelection="",this.responseColor="red"}ngOnInit(){}getItemName(t){switch(t){case"s":return"Tijeras";case"r":return"Piedra";case"p":return"Papel"}return"nananana"}win(t,e,i){this.response="Ganaste :D",this.responseColor="green",this.saveScore(t,e,i)}lose(t,e,i){this.response="Perdiste D:",this.responseColor="red",this.saveScore(t,e,i)}draw(t,e){this.response="Empate!! ._.",this.responseColor="#673ab7",this.saveScore(t,e,e)}saveScore(t,e,i){let s=new r.b;s.date=Date.now().toString(),s.game="ppt",s.user=this.authService.loggedUser.value,s.score={gameResult:t,userSelection:e,computerSelection:i},this.scoreService.create(s)}play(t){this.userSelection=this.getItemName(t);let e=this.getComputerChoice();switch(this.oponentSelection=this.getItemName(e),t+e){case"rs":case"sp":case"pr":this.win("win",this.userSelection,this.oponentSelection);break;case"rp":case"ps":case"sr":this.lose("lose",this.userSelection,this.oponentSelection);break;case"rr":case"pp":case"ss":this.draw("draw",this.userSelection)}}getComputerChoice(){return["r","p","s"][Math.floor(3*Math.random())]}}return t.\u0275fac=function(e){return new(e||t)(s.Ob(c.a),s.Ob(a.a))},t.\u0275cmp=s.Ib({type:t,selectors:[["app-piedra-papel-tijera"]],decls:20,vars:8,consts:[[1,"game-title"],[1,"container"],[1,"image-div",3,"click"],["mat-card-image","","src","/assets/juegos/piedrapapeltijera/rock.png"],["mat-card-image","","src","/assets/juegos/piedrapapeltijera/paper.png"],["mat-card-image","","src","/assets/juegos//piedrapapeltijera/scissors.png"],[1,"response"],[1,"response",3,"ngStyle"],[1,"game-footer"],[3,"fixTop","selectedGame"]],template:function(t,e){1&t&&(s.Ub(0,"mat-card-title",0),s.Cc(1,"Piedra papel o tijera!"),s.Tb(),s.Ub(2,"mat-card",1),s.Ub(3,"div",2),s.cc("click",function(){return e.play("r")}),s.Pb(4,"img",3),s.Tb(),s.Ub(5,"div",2),s.cc("click",function(){return e.play("p")}),s.Pb(6,"img",4),s.Tb(),s.Ub(7,"div",2),s.cc("click",function(){return e.play("s")}),s.Pb(8,"img",5),s.Tb(),s.Tb(),s.Ub(9,"mat-card"),s.Ub(10,"div",6),s.Cc(11),s.Tb(),s.Ub(12,"div",6),s.Cc(13),s.Tb(),s.Ub(14,"div",7),s.Cc(15),s.Tb(),s.Tb(),s.Ub(16,"mat-card-footer"),s.Ub(17,"div",8),s.Cc(18," Puntaje actual "),s.Tb(),s.Tb(),s.Pb(19,"app-survey-button",9)),2&t&&(s.Db(11),s.Ec(" Elegiste: ",e.userSelection," "),s.Db(2),s.Ec(" El oponente eligio: ",e.oponentSelection," "),s.Db(1),s.lc("ngStyle",s.pc(6,x,e.responseColor)),s.Db(1),s.Ec(" ",e.response," "),s.Db(4),s.lc("fixTop",!0)("selectedGame","Piedra papel o tijera"))},directives:[S.g,S.a,S.e,l.l,f.b,S.c,v],styles:[".absolute-position[_ngcontent-%COMP%]{position:static;width:100px!important;height:100%;display:inline-block}.container[_ngcontent-%COMP%]{margin:10px;display:flex;flex-direction:row;justify-content:center;min-height:100px}.image-div[_ngcontent-%COMP%]{width:100px!important;height:100%;background-color:#fff;padding:15px;border:4px solid #333;border-radius:20px;cursor:pointer}.image-div[_ngcontent-%COMP%]:active{background-color:#626078}.response[_ngcontent-%COMP%]{font-family:fantasy;font-size:18px;text-align:center}"]}),t})();const k=["8-ball","baked-potato","dinosaur","kronos","rocket","skinny-unicorn","that-guy","zeppelin","back"].map(t=>({name:t,flipped:!1,discovered:!1,url:`assets/${t}.png`})),O=k.filter(t=>"back"!==t.name);var T=i("XiUz");let P=(()=>{class t{constructor(){this.flipped=new s.o,this.backCard=k.find(t=>"back"===t.name)}flip(t){t.flipped||this.flipped.emit(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=s.Ib({type:t,selectors:[["app-card"]],inputs:{info:"info"},outputs:{flipped:"flipped"},decls:3,vars:4,consts:[[1,"card",3,"click"],[1,"front",3,"src"],[1,"back",3,"src"]],template:function(t,e){1&t&&(s.Ub(0,"div",0),s.cc("click",function(){return e.flip(e.info)}),s.Pb(1,"img",1),s.Pb(2,"img",2),s.Tb()),2&t&&(s.Gb("flipped",e.info.flipped),s.Db(1),s.mc("src",e.info.url,s.vc),s.Db(1),s.mc("src",e.backCard.url,s.vc))},styles:["[_nghost-%COMP%]{width:100px;height:121px;margin-right:3px;cursor:pointer;position:relative;perspective:800px}.card[_ngcontent-%COMP%]{width:100%;height:100%;transition:transform 1s;transform-style:preserve-3d}.card.flipped[_ngcontent-%COMP%]{transform:rotateY(180deg)}.card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:block;height:100%;width:100%;position:absolute;backface-visibility:hidden;-webkit-backface-visibility:hidden}.card[_ngcontent-%COMP%]   .back[_ngcontent-%COMP%]{background:#00f;transform:rotateY(0deg)}.card[_ngcontent-%COMP%]   .front[_ngcontent-%COMP%]{background:#00f;transform:rotateY(180deg)}@media screen and (max-width:450px){[_nghost-%COMP%]{width:92px;height:111px;margin-right:1px}}@media screen and (max-width:380px){[_nghost-%COMP%]{width:85px;height:102px;margin-right:1px}}@media screen and (max-width:360px){[_nghost-%COMP%]{width:70px;height:84px;margin-right:1px}}"]}),t})();function _(t,e){if(1&t){const t=s.Vb();s.Ub(0,"app-card",1),s.cc("click",function(){s.uc(t);const i=e.$implicit;return s.gc().flipCard(i)}),s.Tb()}2&t&&s.lc("info",e.$implicit)}let M=(()=>{class t{constructor(){this.seleccion=new s.o}flipCard(t){t.flipped=!t.flipped;let e=this.cards$.value.filter(t=>t.flipped&&!t.discovered);1!=e.length&&(2==e.length?this.checkSuccess(e):setTimeout(()=>{t.flipped=!1},1e3))}checkSuccess(t){setTimeout(()=>{t&&(t[0].name==t[1].name?(t[0].discovered=!0,t[1].discovered=!0,this.seleccion.emit(!0)):(t[0].flipped=!1,t[1].flipped=!1,this.seleccion.emit(!1)))},1e3)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=s.Ib({type:t,selectors:[["app-chessboard"]],inputs:{cards$:"cards$"},outputs:{seleccion:"seleccion"},decls:2,vars:3,consts:[[3,"info","click",4,"ngFor","ngForOf"],[3,"info","click"]],template:function(t,e){1&t&&(s.Ac(0,_,1,1,"app-card",0),s.hc(1,"async")),2&t&&s.lc("ngForOf",s.ic(1,1,e.cards$))},directives:[l.j,P],pipes:[l.b],styles:["[_nghost-%COMP%]{margin-top:20px;width:500px;background-color:#fff;height:470px;border-radius:4px;padding:10px 5px;display:flex;flex-wrap:wrap;justify-content:center;align-items:center;align-content:space-around}card[_ngcontent-%COMP%]:nth-child(4n){margin-right:0}@media screen and (max-width:450px){[_nghost-%COMP%]{height:480px;padding:10px 0}}@media screen and (max-width:370px){[_nghost-%COMP%]{height:450px}}"]}),t})();function U(t,e){if(1&t&&(s.Ub(0,"mat-card",4),s.Ub(1,"div",8),s.Cc(2),s.Tb(),s.Tb()),2&t){const t=s.gc();s.Db(2),s.Ec(" Errores: ",t.errorCount," ")}}const D=function(t){return{color:t}};let I=(()=>{class t{constructor(t,e){this.scoreService=t,this.as=e,this.responseColor="black",this.response="Elija 2 cartas!",this.errorCount=0,this.foundCount=0,this.maxFoundCount=8,this.showErrors=!0}ngOnInit(){let t=new n.a(O.concat(O).map((t,e)=>({_id:e,name:t.name,flipped:t.flipped,discovered:t.discovered,url:t.url})));this.lista=t}seleccion(t){t?(this.responseColor="green",this.response="Encontrados!",this.foundCount++,this.foundCount==this.maxFoundCount&&this.won()):(this.responseColor="red",this.response="Intente de nuevo!",this.errorCount++)}won(){this.response="Felicitaciones! Gan\xf3! Con un total de "+this.errorCount+"errores.",this.responseColor="#673ab7",this.showErrors=!1,this.saveScore()}saveScore(){let t=new r.b;t.date=Date.now().toString(),t.user=this.as.loggedUser.value,t.game="memotest",t.score={errors:this.errorCount},this.scoreService.create(t)}}return t.\u0275fac=function(e){return new(e||t)(s.Ob(a.a),s.Ob(c.a))},t.\u0275cmp=s.Ib({type:t,selectors:[["app-memotest"]],decls:10,vars:7,consts:[["fxLayout","row","fxLayoutAlign","center center",1,"master-container",2,"margin-top","20px"],[1,"mat-card-title","game-title"],[1,"message-container-2",3,"cards$","seleccion"],[1,"message-container"],[1,"card-container"],[1,"response",3,"ngStyle"],["class","card-container",4,"ngIf"],[1,"survey-btn",3,"selectedGame"],[1,"response",2,"color","red"]],template:function(t,e){1&t&&(s.Ub(0,"div",0),s.Ub(1,"mat-card-title",1),s.Cc(2,"Memotest"),s.Tb(),s.Ub(3,"app-chessboard",2),s.cc("seleccion",function(t){return e.seleccion(t)}),s.Tb(),s.Ub(4,"div",3),s.Ub(5,"mat-card",4),s.Ub(6,"div",5),s.Cc(7),s.Tb(),s.Tb(),s.Ac(8,U,3,1,"mat-card",6),s.Tb(),s.Tb(),s.Pb(9,"app-survey-button",7)),2&t&&(s.Db(3),s.lc("cards$",e.lista),s.Db(3),s.lc("ngStyle",s.pc(5,D,e.responseColor)),s.Db(1),s.Ec(" ",e.response," "),s.Db(1),s.lc("ngIf",e.showErrors),s.Db(1),s.lc("selectedGame","memotest"))},directives:[T.b,T.a,S.g,M,S.a,l.l,f.b,l.k,v],styles:[".response[_ngcontent-%COMP%]{font-family:fantasy;font-size:18px;text-align:center}.message-container[_ngcontent-%COMP%]{margin:auto;width:262px}.message-container-2[_ngcontent-%COMP%]{margin-top:80px \u200b!important;margin:auto}.master-container[_ngcontent-%COMP%]{display:block!important}.card-container[_ngcontent-%COMP%]{display:inline-block;position:relative}"]}),t})();const A=["flipContainer"],j=[[["","front",""]],[["","back",""]]],E=["[front]","[back]"];let B=(()=>{class t{constructor(t){this.renderer=t}ngOnInit(){this.rotate()}ngOnChanges(t){this.rotate()}rotate(){this.flipContainer&&this.flipContainer.nativeElement&&(this.flip?this.renderer.addClass(this.flipContainer.nativeElement,"rotate"):this.renderer.removeClass(this.flipContainer.nativeElement,"rotate"))}}return t.\u0275fac=function(e){return new(e||t)(s.Ob(s.G))},t.\u0275cmp=s.Ib({type:t,selectors:[["ngx-flip"]],viewQuery:function(t,e){if(1&t&&s.Fc(A,1),2&t){let t;s.rc(t=s.dc())&&(e.flipContainer=t.first)}},inputs:{flip:"flip"},features:[s.Bb],ngContentSelectors:E,decls:6,vars:0,consts:[[1,"flipper"],["flipContainer",""],[1,"front"],[1,"back"]],template:function(t,e){1&t&&(s.kc(j),s.Ub(0,"div",0,1),s.Ub(2,"div",2),s.jc(3),s.Tb(),s.Ub(4,"div",3),s.jc(5,1),s.Tb(),s.Tb())},styles:["[_nghost-%COMP%]{perspective:1000px;display:block}[_nghost-%COMP%]   .flipper[_ngcontent-%COMP%]{transition:.6s;transform-style:preserve-3d;height:100%;width:100%;position:relative}[_nghost-%COMP%]   .back[_ngcontent-%COMP%], [_nghost-%COMP%]   .front[_ngcontent-%COMP%]{width:100%;height:100%;-webkit-backface-visibility:hidden;backface-visibility:hidden;position:absolute;top:0;left:0}[_nghost-%COMP%]   .front[_ngcontent-%COMP%]{z-index:2;transform:rotateY(0deg)}[_nghost-%COMP%]   .back[_ngcontent-%COMP%], [_nghost-%COMP%]   .rotate[_ngcontent-%COMP%]{transform:rotateY(180deg)}"],changeDetection:0}),t})(),G=(()=>{class t{rotate(){this.flip=!this.flip}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=s.Ib({type:t,selectors:[["app-card-bj"]],inputs:{suit:"suit",face:"face",flip:"flip"},decls:6,vars:3,consts:[[1,"card"],[3,"flip"],["front","",1,"front"],[3,"src"],["back","",1,"back"],["src","assets/png/1x/back-navy.png"]],template:function(t,e){1&t&&(s.Ub(0,"div",0),s.Ub(1,"ngx-flip",1),s.Ub(2,"div",2),s.Pb(3,"img",3),s.Tb(),s.Ub(4,"div",4),s.Pb(5,"img",5),s.Tb(),s.Tb(),s.Tb()),2&t&&(s.Db(1),s.lc("flip",e.flip),s.Db(2),s.nc("src","assets/png/1x/",e.face,"_",e.suit,".png",s.vc))},directives:[B],styles:["[_nghost-%COMP%]   ngx-flip[_ngcontent-%COMP%]{height:145px}@media screen and (max-width:600px){[_nghost-%COMP%]   ngx-flip[_ngcontent-%COMP%]{height:124px}}[_nghost-%COMP%]   ngx-flip[_ngcontent-%COMP%]   .back[_ngcontent-%COMP%], [_nghost-%COMP%]   ngx-flip[_ngcontent-%COMP%]   .front[_ngcontent-%COMP%]{height:100%;display:flex;justify-content:center;align-items:center}@media only screen and (max-width:600px){div.card[_ngcontent-%COMP%]{height:124px}div.card[_ngcontent-%COMP%], img[_ngcontent-%COMP%]{width:85px}}@media only screen and (min-width:600px){div.card[_ngcontent-%COMP%]{height:145px}div.card[_ngcontent-%COMP%], img[_ngcontent-%COMP%]{width:100px}}"]}),t})();var $=i("XNiG"),q=i("yCtX"),R=i("DH7j"),L=i("7o/Q"),N=i("Lhse"),F=i("zx2A");function H(...t){const e=t[t.length-1];return"function"==typeof e&&t.pop(),Object(q.a)(t,void 0).lift(new V(e))}class V{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new W(t,this.resultSelector))}}class W extends L.a{constructor(t,e,i=Object.create(null)){super(t),this.resultSelector=e,this.iterators=[],this.active=0,this.resultSelector="function"==typeof e?e:void 0}_next(t){const e=this.iterators;Object(R.a)(t)?e.push(new X(t)):e.push("function"==typeof t[N.a]?new z(t[N.a]()):new Y(this.destination,this,t))}_complete(){const t=this.iterators,e=t.length;if(this.unsubscribe(),0!==e){this.active=e;for(let i=0;i<e;i++){let e=t[i];e.stillUnsubscribed?this.destination.add(e.subscribe()):this.active--}}else this.destination.complete()}notifyInactive(){this.active--,0===this.active&&this.destination.complete()}checkIterators(){const t=this.iterators,e=t.length,i=this.destination;for(let r=0;r<e;r++){let e=t[r];if("function"==typeof e.hasValue&&!e.hasValue())return}let s=!1;const n=[];for(let r=0;r<e;r++){let e=t[r],a=e.next();if(e.hasCompleted()&&(s=!0),a.done)return void i.complete();n.push(a.value)}this.resultSelector?this._tryresultSelector(n):i.next(n),s&&i.complete()}_tryresultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(i){return void this.destination.error(i)}this.destination.next(e)}}class z{constructor(t){this.iterator=t,this.nextResult=t.next()}hasValue(){return!0}next(){const t=this.nextResult;return this.nextResult=this.iterator.next(),t}hasCompleted(){const t=this.nextResult;return Boolean(t&&t.done)}}class X{constructor(t){this.array=t,this.index=0,this.length=0,this.length=t.length}[N.a](){return this}next(t){const e=this.index++;return e<this.length?{value:this.array[e],done:!1}:{value:null,done:!0}}hasValue(){return this.array.length>this.index}hasCompleted(){return this.array.length===this.index}}class Y extends F.b{constructor(t,e,i){super(t),this.parent=e,this.observable=i,this.stillUnsubscribed=!0,this.buffer=[],this.isComplete=!1}[N.a](){return this}next(){const t=this.buffer;return 0===t.length&&this.isComplete?{value:null,done:!0}:{value:t.shift(),done:!1}}hasValue(){return this.buffer.length>0}hasCompleted(){return 0===this.buffer.length&&this.isComplete}notifyComplete(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()}notifyNext(t){this.buffer.push(t),this.parent.checkIterators()}subscribe(){return Object(F.c)(this.observable,new F.a(this))}}var J=i("PqYM"),K=i("Cfvw"),Q=i("GyhO");class Z{constructor(t,e){this._suit=t,this._face=e,this._flip=!1}get suit(){return this._suit}get face(){return this._face}get value(){return"king"===this.face||"queen"===this.face||"jack"===this.face?10:Number(this.face)}get flip(){return this._flip}set flip(t){this._flip=t}}let tt=(()=>{class t{constructor(){this.suits=["heart","diamond","spade","club"],this.faces=["1","2","3","4","5","6","7","8","9","10","jack","queen","king"],this.freshDeck()}freshDeck(){this.distribution$=new $.a,this.trigger$=new $.a,this.deck=this.shuffle(this.suits.map(t=>this.faces.map(e=>new Z(t,e))).reduce((t,e)=>t.concat(e))),this.deck[1].flip=!0,this.deal$=this.trigger$.pipe(function(...t){return e=>e.lift.call(Object(Q.a)(e,...t))}(H(Object(J.a)(1e3,1e3),H(this.distribution$,Object(K.a)(this.deck)))))}deal(){this.trigger$.next(!0),this.trigger$.complete(),this.distribution$.next("p"),this.distribution$.next("d"),this.distribution$.next("p"),this.distribution$.next("d")}hit(){this.distribution$.next("p")}dealToDealer(){this.distribution$.next("d")}shuffle(t){let e,i,s=t.length;for(;0!==s;)i=Math.floor(Math.random()*s),s--,e=t[s],t[s]=t[i],t[i]=e;return t}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=s.Kb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const et=1e3;var it=function(t){return t[t.Start=0]="Start",t[t.Dealing=1]="Dealing",t[t.Dealt=2]="Dealt",t[t.Stay=3]="Stay",t[t.Blackjack=4]="Blackjack",t[t.Win=5]="Win",t[t.Lose=6]="Lose",t[t.Tie=7]="Tie",t[t.Bust=8]="Bust",t}({});let st=(()=>{class t{constructor(t,e,i){this.dealerService=t,this.scoreService=e,this.authService=i,this._playerCards=[],this._dealerCards=[],this.setup()}get dealerCards(){return this._dealerCards}get playerCards(){return this._playerCards}get gameState(){return it[this._gameState]}set gameState(t){this._gameState=it[t]}setUpSubscription(){this.dealerService.deal$.subscribe(t=>{if(Array.isArray(t)){let e=t[1][1];"d"===t[1][0]?(this._dealerCards.push(e),1===e.value&&(this.dealerHasAce=!0),this.dealerScore+=e.value,this.dealerShouldHit()?setTimeout(()=>{this.dealerService.dealToDealer()},et):this.playerStays&&(this.dealerStays=!0,this.calculateGameState())):"p"===t[1][0]&&(this._playerCards.push(e),1===e.value&&(this.playerHasAce=!0),this.playerScore+=e.value),this.blackjack()&&(this.gameState="Blackjack"),this.bust()&&(this.gameState="Bust"),this.calculateGameState()}})}calculateGameState(){this.firstCardsJustDealt()?(this.blackjack()?this.playerBlackjack()?this.dealerBlackjack()?setTimeout(()=>{this.gameState="Tie",this.restart()},et):setTimeout(()=>{this.gameState="Win",this.restart()},et):setTimeout(()=>{this.gameState="Lose",this.restart()},et):this.bust()?(this.gameState="Bust",this.playerBust()||setTimeout(()=>{this.gameState="Win",this.restart()},et),this.dealerBust()||setTimeout(()=>{this.gameState="Lose",this.restart()},et)):this.gameState="Dealt",this.playerStays&&this.dealerStays&&this.scoreAfterBothStay()):this.playerStays&&this.dealerStays?this.scoreAfterBothStay():this.playerBust()?(this.gameState="Bust",setTimeout(()=>{this.gameState="Lose",this.restart()},et)):this.dealerBust()&&setTimeout(()=>{this.gameState="Win",this.restart()},et)}scoreAfterBothStay(){console.log("After stay"),this.dealerBust()?(this.gameState="Bust",setTimeout(()=>{this.gameState="Win",this.restart()},et)):(this.playerScore<=11&&this.playerHasAce&&(this.playerScore+=10),this.dealerScore<=11&&this.dealerHasAce&&(this.dealerScore+=10),this.gameState=this.playerScore>this.dealerScore?"Win":this.playerScore<this.dealerScore?"Lose":"Tie"),this.restart()}playerBust(){return this.playerScore>21}dealerBust(){return this.dealerScore>21}bust(){return this.playerBust()||this.dealerBust()}playerBlackjack(){return 2===this._playerCards.length&&this.playerHasAce&&11===this.playerScore}dealerBlackjack(){return 2===this._playerCards.length&&this.dealerHasAce&&11===this.dealerScore}blackjack(){return this.playerBlackjack()||this.dealerBlackjack()}firstCardsJustDealt(){return 2===this._playerCards.length&&2===this._dealerCards.length}deal(){this.dealerService.deal(),this.gameState="Dealing"}hit(){this.dealerService.hit()}stay(){this.playerStays=!0,this.gameState="Stay",this.dealerShouldHit()?this.dealerService.dealToDealer():(this.dealerStays=!0,this.calculateGameState())}dealerShouldHit(){return this.playerStays&&(this.dealerScore<17||this.dealerHasAce&&this.dealerScore<7)}setup(){this.playerScore=0,this.dealerScore=0,this.playerHasAce=!1,this.dealerHasAce=!1,this.playerStays=!1,this.dealerStays=!1,this.gameState="Start",this.setUpSubscription()}restart(){setTimeout(()=>{this.dealerService.freshDeck(),this._playerCards.length=0,this._dealerCards.length=0,this.logLastGame(),this.setup()},3e3)}logLastGame(){if("Start"!=this.gameState&&"Dealing"!=this.gameState&&"Stay"!=this.gameState){let t=new r.b;t.date=Date.now().toString(),t.game="blackjack",t.user=this.authService.loggedUser.value,t.score={gameState:this.gameState,playerScore:this.playerScore,dealerScore:this.dealerScore},this.scoreService.create(t)}}}return t.\u0275fac=function(e){return new(e||t)(s.Yb(tt),s.Yb(a.a),s.Yb(c.a))},t.\u0275prov=s.Kb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function nt(t,e){1&t&&(s.Ub(0,"div"),s.Pb(1,"img",3),s.Tb())}function rt(t,e){if(1&t&&(s.Ub(0,"div"),s.Pb(1,"app-card-bj",4),s.Tb()),2&t){const t=e.$implicit;s.Db(1),s.mc("suit",t.suit),s.mc("face",t.face),s.lc("flip",t.flip)}}let at=(()=>{class t{constructor(t,e){this.gameStateService=t,this.cdRef=e,this.dealer=!1,this.cards=[]}ngOnInit(){this.cards=this.dealer?this.gameStateService.dealerCards:this.gameStateService.playerCards}ngAfterViewInit(){this.dealer&&this.cardComponents.changes.subscribe(()=>{2===this.cardComponents.length&&(this.cardComponents.first.rotate(),this.cdRef.detectChanges())})}}return t.\u0275fac=function(e){return new(e||t)(s.Ob(st),s.Ob(s.h))},t.\u0275cmp=s.Ib({type:t,selectors:[["app-hand"]],viewQuery:function(t,e){if(1&t&&s.Fc(G,1),2&t){let t;s.rc(t=s.dc())&&(e.cardComponents=t)}},inputs:{dealer:"dealer"},decls:4,vars:2,consts:[[1,"dealer","hand"],[4,"ngIf"],[4,"ngFor","ngForOf"],["src","assets/placeholder.png"],[3,"flip","suit","face"]],template:function(t,e){1&t&&(s.Ub(0,"div",0),s.Ub(1,"div"),s.Ac(2,nt,2,0,"div",1),s.Ac(3,rt,2,3,"div",2),s.Tb(),s.Tb()),2&t&&(s.Db(2),s.lc("ngIf",0===e.cards.length),s.Db(1),s.lc("ngForOf",e.cards))},directives:[l.k,l.j,G],styles:["div.hand[_ngcontent-%COMP%]{display:inline-block;border:1px solid #fff;border-radius:10px;background-color:green;padding:5px;margin:5px auto}div.hand[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex}img[_ngcontent-%COMP%]{height:145px;width:100px}"]}),t})();function ct(t,e){if(1&t){const t=s.Vb();s.Ub(0,"div"),s.Ub(1,"button",2),s.cc("click",function(){return s.uc(t),s.gc().deal()}),s.Ub(2,"strong"),s.Cc(3,"REPARTIR"),s.Tb(),s.Tb(),s.Tb()}}function ot(t,e){if(1&t){const t=s.Vb();s.Ub(0,"div"),s.Ub(1,"button",3),s.cc("click",function(){return s.uc(t),s.gc().hit()}),s.Ub(2,"strong"),s.Cc(3,"PEDIR"),s.Tb(),s.Tb(),s.Ub(4,"button",4),s.cc("click",function(){return s.uc(t),s.gc().stay()}),s.Ub(5,"strong"),s.Cc(6,"PARAR"),s.Tb(),s.Tb(),s.Tb()}}function lt(t,e){1&t&&(s.Ub(0,"div"),s.Ub(1,"div",5),s.Ub(2,"strong"),s.Cc(3,"REPARTIENDO"),s.Tb(),s.Tb(),s.Tb())}function ht(t,e){1&t&&(s.Ub(0,"div"),s.Ub(1,"div",5),s.Ub(2,"strong"),s.Cc(3,"REPARTIENDO"),s.Tb(),s.Tb(),s.Tb())}function dt(t,e){1&t&&(s.Ub(0,"div"),s.Ub(1,"div",5),s.Ub(2,"strong"),s.Cc(3,"BLACKJACK!"),s.Tb(),s.Tb(),s.Tb())}function pt(t,e){1&t&&(s.Ub(0,"div"),s.Ub(1,"div",5),s.Ub(2,"strong"),s.Cc(3,"GANASTE!"),s.Tb(),s.Tb(),s.Tb())}function ut(t,e){1&t&&(s.Ub(0,"div"),s.Ub(1,"div",5),s.Ub(2,"strong"),s.Cc(3,"PERDISTE!"),s.Tb(),s.Tb(),s.Tb())}function gt(t,e){1&t&&(s.Ub(0,"div"),s.Ub(1,"div",5),s.Ub(2,"strong"),s.Cc(3,"EMPATE"),s.Tb(),s.Tb(),s.Tb())}function bt(t,e){1&t&&(s.Ub(0,"div"),s.Ub(1,"div",5),s.Ub(2,"strong"),s.Cc(3,"TE PASASTE!"),s.Tb(),s.Tb(),s.Tb())}let ft=(()=>{class t{constructor(t){this.gameStateService=t}deal(){this.gameStateService.deal()}hit(){this.gameStateService.hit()}stay(){this.gameStateService.stay()}}return t.\u0275fac=function(e){return new(e||t)(s.Ob(st))},t.\u0275cmp=s.Ib({type:t,selectors:[["app-button-panel"]],decls:10,vars:10,consts:[[3,"ngSwitch"],[4,"ngSwitchCase"],["type","button",1,"deal",3,"click"],["type","button",1,"hit",3,"click"],["type","button",1,"stay",3,"click"],[1,"message"]],template:function(t,e){1&t&&(s.Ub(0,"div",0),s.Ac(1,ct,4,0,"div",1),s.Ac(2,ot,7,0,"div",1),s.Ac(3,lt,4,0,"div",1),s.Ac(4,ht,4,0,"div",1),s.Ac(5,dt,4,0,"div",1),s.Ac(6,pt,4,0,"div",1),s.Ac(7,ut,4,0,"div",1),s.Ac(8,gt,4,0,"div",1),s.Ac(9,bt,4,0,"div",1),s.Tb()),2&t&&(s.lc("ngSwitch",e.gameStateService.gameState),s.Db(1),s.lc("ngSwitchCase","Start"),s.Db(1),s.lc("ngSwitchCase","Dealt"),s.Db(1),s.lc("ngSwitchCase","Dealing"),s.Db(1),s.lc("ngSwitchCase","Stay"),s.Db(1),s.lc("ngSwitchCase","Blackjack"),s.Db(1),s.lc("ngSwitchCase","Win"),s.Db(1),s.lc("ngSwitchCase","Lose"),s.Db(1),s.lc("ngSwitchCase","Tie"),s.Db(1),s.lc("ngSwitchCase","Bust"))},directives:[l.m,l.n],styles:["button[_ngcontent-%COMP%]{border:none;border-radius:5px;color:#fff;font-size:1.5em;height:40px;width:100px;margin:2px}button[_ngcontent-%COMP%]:hover{border:2px solid #fff}button[_ngcontent-%COMP%]:focus{outline:0}button.hit[_ngcontent-%COMP%]{background-color:orange}button.hit[_ngcontent-%COMP%]:active{background-color:#ff8c00}button.stay[_ngcontent-%COMP%]{background-color:red}button.stay[_ngcontent-%COMP%]:active{background-color:#8b0000}button.deal[_ngcontent-%COMP%]{background-color:green;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content}button.deal[_ngcontent-%COMP%]:active{background-color:#006400}div.message[_ngcontent-%COMP%]{font-family:sans-serif;border:none;color:#000;font-size:1.5em;height:40px;margin:2px}div.message[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{vertical-align:-webkit-baseline-middle}"]}),t})();const mt=[{path:"tateti",component:C,canActivate:[y.a]},{path:"piedrapapeltijera",component:w,canActivate:[y.a]},{path:"memotest",component:I,canActivate:[y.a]},{path:"mijuego",component:(()=>{class t{constructor(){this.title="Blackjack"}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=s.Ib({type:t,selectors:[["app-mi-juego"]],decls:11,vars:4,consts:[[2,"text-align","center"],[3,"dealer"],[3,"selectedGame"]],template:function(t,e){1&t&&(s.Ub(0,"div",0),s.Ub(1,"h1"),s.Cc(2),s.Tb(),s.Ub(3,"h1"),s.Cc(4,"DEALER"),s.Tb(),s.Pb(5,"app-hand",1),s.Pb(6,"app-button-panel"),s.Pb(7,"app-hand",1),s.Ub(8,"h1"),s.Cc(9,"T\xda"),s.Tb(),s.Pb(10,"app-survey-button",2),s.Tb()),2&t&&(s.Db(2),s.Ec(" ",e.title,"! "),s.Db(3),s.lc("dealer",!0),s.Db(2),s.lc("dealer",!1),s.Db(3),s.lc("selectedGame","blackjack"))},directives:[at,ft,v],styles:[""]}),t})(),canActivate:[y.a]}];let vt=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.Mb({type:t}),t.\u0275inj=s.Lb({imports:[[b.e.forChild(mt)],b.e]}),t})()}}]);